# Countdown 任务奖励机制解析

Countdown (倒计时/24点) 任务是检验模型逻辑推理与规则遵从性的核心任务。

## 1. 奖励公式

$$ R = R_{\text{format}} + R_{\text{nums}} + R_{\text{accuracy}} $$

*   **$R_{\text{format}}$ (0.2)**: 强制模型输出 `<think>...</think>\n<answer>...</answer>` 结构。
*   **$R_{\text{nums}}$ (0.4)**: 校验 `<answer>` 中的表达式是否**每个数字仅用一次**且不使用未给出的数字。
*   **$R_{\text{accuracy}}$ (0.4)**: 校验表达式的数学计算结果是否等于目标值。

## 2. 为什么这样设计？

1.  **分阶段引导**: 初期模型可能只会写格式（得 0.2），随后学会拼凑数字（得 0.6），最后才学会正确的算术逻辑（得 1.0）。
2.  **严格一致性**: 通过 `ast.parse` 进行安全求值，防止模型通过输出文字“欺骗”正则。

## 3. 评估指标 (Signal Probing)

*   **Mean Accuracy**: 整体期望得分。
*   **Max Accuracy**: 组内最佳表现，反映搜索上限。
*   **Variance**: 衡量同一题目下不同路径的差异，是 GRPO 训练的核心驱动力。